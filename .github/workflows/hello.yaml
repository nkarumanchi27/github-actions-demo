name: Hello World workflow

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Your name'
        requird: true
        default: ''
      department:
        description: 'Your department'
        required: true
        default: ''
      region:
        description: 'Your region'
        required: true
        default: 'us-east1'
jobs:
  hellow-world-job:
    runs-on: ubuntu-latest

    steps:
      - name: checkout repository
        uses: actions/checkout@v2

      - name: Fetch user role
        id: fetch_role
        run: |
          user_role=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOEKN }}" \
           "https://api.github.com/repos/${{ github.repository }}/collaborators/${{ github.actor }}/permission") \
           | jq -r '.permission')
          echo "User_role=$user_role"

      - name: check region
        if: ${{ github.event.inputs.region == 'us-east1' }}
        run: echo "Hello ${{ github.event.inputs.name }} from ${{ github.event.inputs.department }} in ${{ github.event.inputs.region }}"
